import{p as D,w as P}from"/build/_shared/chunk-B2ZVSJXD.js";import{a as O,b as F,c as $,f as L}from"/build/_shared/chunk-K546PQX6.js";import{a as M}from"/build/_shared/chunk-TW2OTEET.js";import{a as w,b as R,m as y,t as b}from"/build/_shared/chunk-ZFWZJZG4.js";import{e as p}from"/build/_shared/chunk-ADMCF34Z.js";var E=p(w());var I=p(w());var d=p(w());var T=function(r){var t=r.as,s=r.errors,a=r.name,i=r.message,m=r.render,g=function(u,o){if(u==null)return{};var f,e,S={},k=Object.keys(u);for(e=0;e<k.length;e++)o.indexOf(f=k[e])>=0||(S[f]=u[f]);return S}(r,["as","errors","name","message","render"]),v=F(),c=O(s||v.formState.errors,a);if(!c)return null;var h=c.message,N=c.types,x=Object.assign({},g,{children:h||i});return d.isValidElement(t)?d.cloneElement(t,x):m?m({message:h||i,messages:N}):d.createElement(t||d.Fragment,x)};var l=p(b()),A=({hasSetBtn:r,unit:t,registerName:s,maxValue:a,showErrors:i,onChange:m,onSubmit:g})=>{var f;let{watch:v,register:c,setValue:h,handleSubmit:N,formState:{errors:x}}=F(),u=v(s),o=(0,I.useRef)(null);return(0,I.useEffect)(()=>{let e=v(()=>{g&&N(g)()});return()=>{e.unsubscribe()}},[N,g,v]),(0,l.jsxs)("div",{className:"flex",children:[r?(0,l.jsx)("button",{className:" flex items-center rounded-l-lg border border-r-0 border-gray-200 disabled:text-gray-400",type:"button",onClick:()=>{o.current&&parseInt(o.current.value)>1&&(o.current.value=parseInt(o.current.value)-1+"",h("input",parseInt(o.current.value)))},disabled:u<=1,children:(0,l.jsx)("span",{className:"material-symbols-outlined",children:"remove"})}):null,(0,l.jsx)("input",{...c(s,{valueAsNumber:!0,max:a?{value:a,message:"Out of original quantity"}:void 0,min:0}),type:"number",className:`input max-w-[60px] text-right ${(f=x.input)!=null&&f.message?"outline-red-500 bg-red-50 border-red-500 text-red-500":""}
        ${r?"rounded-none":""}
        `,placeholder:"0",onKeyDown:e=>{(!u||u&&u.toString().length===0)&&e.key==="0"&&e.preventDefault(),a!==void 0&&!isNaN(u)&&(u+"").replace(".","").length===(a+"").replace(".","").length&&[0,1,2,3,4,5,6,7,8,9].includes(parseInt(e.key))&&e.preventDefault(),e.key==="-"&&e.preventDefault()},ref:e=>{o.current=e,c("input").ref(e)}}),r?(0,l.jsx)("button",{type:"button",className:"flex items-center border border-l-0 border-gray-200 rounded-r-lg",onClick:()=>{o.current&&(o.current.value=parseInt(o.current.value)+1+"",h("input",parseInt(o.current.value)))},children:(0,l.jsx)("span",{className:"material-symbols-outlined",children:"add"})}):null,t?(0,l.jsx)("span",{className:"ml-2 flex items-center",children:t}):null,i&&(0,l.jsx)(T,{name:s,errors:x,render:({message:e})=>(0,l.jsx)("span",{className:"absolute left-0 top-full text-red-500 text-xs",children:e})})]})},j=A;var C=p(b()),q=({recipeId:r,defaultValue:t=1})=>{let s=L({defaultValues:{input:t},mode:"onChange"}),a=P(),i=(0,E.useCallback)(m=>{a(D({servings:m.input,recipeId:r}))},[a,r]);return(0,E.useEffect)(()=>{s.reset({input:t})},[t,s]),(0,C.jsx)($,{...s,children:(0,C.jsx)(y,{onSubmit:m=>void m.preventDefault(),children:(0,C.jsx)(j,{registerName:"input",hasSetBtn:!0,onSubmit:m=>{i(m)}})})})},Z=q;var n=p(b());function H({title:r,onDelete:t,recipeId:s,subTitle:a}){let i=R();return(0,n.jsxs)("div",{className:"flex gap-4 ",children:[(0,n.jsx)("div",{className:"w-24",children:(0,n.jsx)("div",{className:"aspect-w-4 aspect-h-3 overflow-hidden rounded-lg shadow-md",children:(0,n.jsx)("img",{className:"w-full h-full object-cover object-center ",src:M})})}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,n.jsx)("h4",{className:"flex-1 text-black font-medium",children:r}),a]}),t?(0,n.jsxs)(y,{className:"flex ",onSubmit:t,method:"post",children:[(0,n.jsx)("input",{type:"hidden",name:"redirectTo",value:`${i.pathname}${i.search}`}),(0,n.jsx)("input",{type:"hidden",name:"deleteId",value:s}),(0,n.jsx)("button",{className:"flex p-1 rounded-full",type:"submit",children:(0,n.jsx)("span",{className:"material-symbols-rounded text-lg leading-none text-gray-500",children:"close"})})]}):null]})}export{j as a,Z as b,H as c};
