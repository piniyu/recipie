import{b as w,c as L}from"/build/_shared/chunk-URPQL65M.js";import{a as T}from"/build/_shared/chunk-FXULA5YR.js";import{j as h,l as b,m as k,n as I,o as R,w as S,x as v}from"/build/_shared/chunk-B2ZVSJXD.js";import"/build/_shared/chunk-K546PQX6.js";import{a as D}from"/build/_shared/chunk-SWCH7KFR.js";import"/build/_shared/chunk-WG3DIZPU.js";import"/build/_shared/chunk-TW2OTEET.js";import{a as B,o as l,p as f,t as g}from"/build/_shared/chunk-ZFWZJZG4.js";import{e as o}from"/build/_shared/chunk-ADMCF34Z.js";var a=o(B());var O=o(T()),r=o(g());function F(){var u;let t=l(),s=f(),N=v(e=>e.recipeServings),n=S(),[d,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{t==null||t.basket.recipes.forEach(({id:e,ingredientsNum:i})=>{n(I({recipeId:e,servings:1})),i.forEach(({ingredient:c})=>{n(h({name:c.name,recipeIds:[e],hadQant:0})),n(b({name:c.name,recipeId:e}))})})},[t==null?void 0:t.basket.recipes,n]);let x=e=>{s.load(`/basket?index&search=${e}`)};return(0,a.useEffect)(()=>{var e;(e=s.data)!=null&&e.list&&y(s.data.list)},[(u=s.data)==null?void 0:u.list]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D,{placeholder:"Basket Search",border:!0,fetch:x,list:d==null?void 0:d.map(e=>({id:"",value:e}))}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"mb-4 font-bold text-black",children:"Recipes in basket"}),(t==null?void 0:t.basket.recipes)&&(t==null?void 0:t.basket.recipes.map(({title:e,id:i,ingredientsNum:c},E)=>{var m;return(0,r.jsx)(L,{title:e,recipeId:i,onDelete:p=>{c.forEach(A=>{n(k({name:A.ingredient.name,recipeId:i}))}),n(R({recipeId:i})),s.submit(p.currentTarget,{action:"/basket?index"})},subTitle:(0,r.jsx)(w,{recipeId:i,defaultValue:(m=N.find(p=>p.recipeId===i))==null?void 0:m.servings})},`${e}_${E}`)}))]})]})}export{F as default};
