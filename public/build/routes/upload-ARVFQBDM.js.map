{
  "version": 3,
  "sources": ["../../../app/routes/upload.tsx"],
  "sourcesContent": ["import { ErrorBoundaryComponent, json, LoaderFunction } from \"@remix-run/node\";\nimport {\n  Link,\n  NavLink,\n  Outlet,\n  useNavigate,\n  useParams,\n} from \"@remix-run/react\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport ContentCard from \"~/components/card/content-card\";\nimport { useAppDispatch, useAppSelector } from \"~/store/configure-store\";\nimport { addStep, deleteStep } from \"~/store/upload-temp/step-form-slice\";\nimport { requireUserId } from \"~/utils/session.server\";\n\nconst defaultSideList = [\n  { value: \"Details\", route: \"./details\" },\n  { value: \"Ingredients\", route: \"./ingredients\" },\n];\nconst defaultStepList = [\n  {\n    value: \"Steps\",\n  },\n  { stepId: \"1\", value: `title`, route: `./1` },\n];\n\nconst SideList = ({\n  route,\n  value,\n  idx,\n  stepId,\n  onDelete,\n}: {\n  stepId?: string | undefined;\n  route?: string;\n  value: string;\n  idx: number;\n  onDelete?: (id: string) => void;\n}) => {\n  if (!route) {\n    return (\n      <li\n        key={`${value}_${route}`}\n        className=\"sider-item px-0 text-sm uppercase tracking-wider text-gray-400\"\n      >\n        {value}\n      </li>\n    );\n  }\n  return (\n    <li key={`${value}_${idx}`} className=\"relative flex\">\n      <NavLink\n        to={route}\n        className={({ isActive }) => `\n        \n                        sider-item \n                        sider-item-gray \n                      ${isActive ? \"bg-primary/10 \" : \"text-black\"}\n                      `}\n      >\n        {stepId ? idx + 1 + \" . \" : null}\n        {value}\n      </NavLink>\n      {onDelete && stepId ? (\n        <button\n          className=\"icon-btn-ui absolute right-8 top-2 z-50 flex h-fit rounded-full p-1 text-red-300 hover:bg-red-500 hover:text-white\"\n          onClick={() => {\n            // e.stopPropagation()\n            onDelete(stepId);\n          }}\n        >\n          <span\n            className=\"material-symbols-outlined leading-none \"\n            style={{ fontVariationSettings: '\"GRAD\" -25' }}\n          >\n            delete\n          </span>\n        </button>\n      ) : null}\n    </li>\n  );\n};\n\nexport const loader: LoaderFunction = async ({ request }) => {\n  const userId = await requireUserId(request);\n  return json({ userId });\n};\n\nexport default function Upload(): JSX.Element {\n  // const { state, dispatch } = useContext(SiderContext)\n  const { stepIdx } = useParams();\n  const [sideList, setSideList] = useState(defaultSideList);\n  const stepForms = useAppSelector((state) => state.stepForm);\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  // useEffect(() => {\n  //   const localValue = getLocalValue(localStorageKey.MOCK_STEP_FORM)\n  //   // if (localValue[0].title !== '') {\n  //   const setSider = () =>\n  //     dispatch({\n  //       type: SiderActionKind.SET_NEW_SIDER,\n  //       payload:   //     })\n  //   if (localValue.every(v => v !== null)) {\n  //     setSider()\n  //   } else {\n  //     localValue.map(v => {\n  //       if (v === null) {\n  //         return { title: '', methods: [{ timeStemp: '', content: '' }] }\n  //       }\n  //       return v\n  //     })\n  //     setSider()\n  //   }\n  //   return () => {\n  //     dispatch({\n  //       type: SiderActionKind.SET_NEW_SIDER,\n  //       payload: defaultSiderValue,\n  //     })\n  //   }\n  // }, [dispatch])\n\n  // useEffect(() => {\n  //   const local = getLocalValue(localStorageKey.MOCK_STEP_FORM)\n  //   if (stepIdx && +stepIdx > local.length) {\n  //     // console.log(stepIdx, local.length)\n  //     throw new Error()\n  //   }\n  // }, [stepIdx])\n\n  return (\n    // <div>\n    <div className=\"layout-px mx-auto max-w-6xl space-y-6 py-14\">\n      <header className=\"flex items-center justify-between  text-black \">\n        {/* <ContentCard className=\"flex items-center justify-between\"> */}\n        <h2 className=\"\">Upload Recipe</h2>\n        <div className=\"flex gap-2\">\n          <button className=\"btn-secondary btn-sm\">Public</button>\n        </div>\n        {/* </ContentCard> */}\n      </header>\n      <ContentCard className=\"flex max-h-[700px] !py-0 !px-0\">\n        <div className=\"flex w-full flex-1 space-x-8\">\n          <div className=\"w-60 border-r border-gray-200 py-6 \">\n            <nav className=\"flex h-full flex-col\">\n              <ul className=\"flex-1  overflow-auto\">\n                {defaultSideList.map(({ value, route }, idx) => {\n                  return (\n                    <SideList\n                      key={`${value}_${idx}`}\n                      route={route}\n                      value={value}\n                      idx={idx}\n                    />\n                  );\n                })}\n                <SideList value=\"Steps\" idx={999} />\n                {stepForms.length > 0\n                  ? stepForms.map(({ title, id }, idx) => {\n                      return (\n                        <SideList\n                          key={`${title}_${idx}`}\n                          route={`/upload/${idx + 1}`}\n                          value={title}\n                          stepId={id}\n                          idx={idx}\n                          onDelete={() => {\n                            if (stepIdx && +stepIdx === idx + 1) {\n                              navigate(`/upload/${idx}`);\n                            } else if (stepIdx && +stepIdx > idx + 1) {\n                              navigate(`/upload/${+stepIdx - 1}`);\n                            }\n                            dispatch(deleteStep({ id }));\n                          }}\n                        />\n                      );\n                    })\n                  : defaultStepList.map(({ value, stepId, route }, idx) => {\n                      return (\n                        <SideList\n                          key={`${value}_${idx}`}\n                          route={route}\n                          value={value}\n                          stepId={stepId}\n                          idx={idx}\n                          onDelete={(stepId) => {\n                            navigate(`/upload/${idx}`);\n                            dispatch(deleteStep({ id: stepId }));\n                          }}\n                        />\n                      );\n                    })}\n              </ul>\n              <div className=\"flex pt-4\">\n                <Link\n                  to={`/upload/${\n                    stepForms.length > 0\n                      ? stepForms.length + 1\n                      : defaultStepList.length + 1\n                  }`}\n                  className=\"btn-sm btn-secondary sider-item flex-1  \"\n                  onClick={() => {\n                    dispatch(\n                      addStep({\n                        title: \"\",\n                        methods: [{ timeStamp: \"\", content: \"\" }],\n                        id: uuidv4(),\n                      })\n                    );\n                  }}\n                >\n                  Add a step\n                </Link>\n              </div>\n            </nav>\n          </div>\n          <div className=\"flex flex-1 py-6\">\n            <div className=\"flex-1 overflow-auto pr-9\">\n              <Outlet />\n            </div>\n          </div>\n        </div>\n      </ContentCard>\n    </div>\n    // {/* </div> */}\n  );\n}\n\nexport const ErrorBoundary: ErrorBoundaryComponent = ({ error }) => {\n  const navigate = useNavigate();\n  console.log(\"error\");\n  return (\n    <div>\n      <h1>Oops! Something went wrong!</h1>\n      <button\n        onClick={() => {\n          navigate(-1);\n        }}\n      >\n        Go back\n      </button>\n      <Link to=\"/\">Home page</Link>\n    </div>\n  );\n};\n"],
  "mappings": "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",
  "names": ["import_react", "stepId"]
}
